#lo hizo el profe

ACCION 2.3.1.a ES
    AMBIENTE
        FECHA = REGISTRO
        ..
        FIN_REGISTRO

        Fact = REGISTRO
            NCli: entero
            Nfact: entero
            F_fact: FECHA
            importe: real
        FIN_REGISTRO

        Facturas: Archivo de Fact ordenado por NCli y Nfact
        F: Fact

        Clien = REGISTRO
            NCli: entero
            Nombre: AN(40)
            DNI: N(8)
            CUIT: N(11)
            Domicilio: AN(50)
        FIN_REGISTRO
        Clientes: Archivo de Clien indexado por NCli
        C: Clien

    PROCESO
        ABRIR E/(Facturas)
        ABRIR E/(Clientes) #no es necesario abrir de E/S porque no se pide ninguna modificación

        LEER(Facturas, F)
        ESC("|Nro Cliente | Nombre | Nro Factura |")
        MIENTRAS NFDA(Facturas) HACER
            C.NCli := F.Ncli

            LEER(Clientes, C)
            SI Existe ENTONCES
                ESC(F.Ncli, C.Nombre, F.Nfact)
            SINO
                ESC("Cliente no encontrado")
            FIN_SI
            LEER(Facturas, F)
        FIN_MIENTRAS

        CERRAR(Facturas)
        CERRAR(Clientes)
FIN_ACCION

/

ACCION 2.3.1.b ES
    AMBIENTE
        FECHA = REGISTRO
        ..
        FIN_REGISTRO

        Fact = REGISTRO
            NCli: entero
            Nfact: entero
            F_fact: FECHA
            importe: real
        FIN_REGISTRO

        Facturas: Archivo de Fact ordenado por NCli y Nfact
        F: Fact

        Clien = REGISTRO
            NCli: entero
            Nombre: AN(40)
            DNI: N(8)
            CUIT: N(11)
            Domicilio: AN(50)
        FIN_REGISTRO
        Clientes: Archivo de Clien indexado por NCli
        C: Clien

        cantF: entero
        totalF: real
    PROCESO
        ABRIR E/(Facturas)
        ABRIR E/(Clientes) #no es necesario abrir de E/S porque no se pide ninguna modificación

        LEER(Facturas, F)
        ESC("|Nro Cliente | Nombre | Nro Factura |")
        MIENTRAS NFDA(Facturas) HACER
            C.NCli := F.Ncli
            LEER(Clientes, C)

            SI Existe ENTONCES
                cantF:= 0
                totalF:= 0
                MIENTRAS C.Ncli = F.Ncli y NFDA(Facturas) HACER
                    cantF:= CantF + 1
                    totalF:= totalF + F.importe
                    LEER(Facturas, F)
                FIN_MIENTRAS

                ESC(C.Ncli, C.Nombre, F.Nfact, totalF, cantF) #muestro el nro de cliente del archivo indexado porque el secuencial ya cambió
            SINO
                ESC("Cliente no encontrado")
                LEER(Facturas,F)
            FIN_SI
            //LEER(Facturas, F) //no, porque se saltea un cliente con este leer
        FIN_MIENTRAS

        CERRAR(Facturas)
        CERRAR(Clientes)
FIN_ACCION